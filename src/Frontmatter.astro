---
import type { SchemaMeta } from './index';
import { getRegistry } from './index';

type Props = {
	blocks?: SchemaMeta[];
};

const { blocks } = Astro.props;

const registry = getRegistry();

const builtSections =
	blocks != null
		? blocks
				.map((props) => {
					const section = registry[props.type];
					if (section == null) return;
					return {
						section: section.load,
						props,
					};
				})
				.filter((data) => data != null)
		: [];
---

{
	builtSections.map((data) => {
		return <data.section.default {...data.props} />;
	})
}
